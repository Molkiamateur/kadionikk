#include <stdio.h>
#include <stdlib.h>
#include <system.h>
#include <time.h>
#include <unistd.h>
#include <alt_types.h>
#include <io.h>
#include "includes.h"
#include "altera_up_avalon_video_dma_controller.h"

#include "bsp.h"
#include "vgalib.h"

/* Definition of Task Stacks */
#define   TASK_STACKSIZE       2048
OS_STK    task1_stk[TASK_STACKSIZE];

/* Definition of Task Priorities */
#define TASK1_PRIORITY      1

int min(int a, int b){
	return a < b ? a : b;
}
void task_fonte(void* pdata){
	VgaDrawBox(0, 0, 319, 239, 63 << 11);
	VgaSetCursor(5,5);
	VgaWriteScreen("AFFICHAGE VGA NIOS II - ENSEIRB");

}

int main(void){

  BSP_init();

  VgaClearScreen();
  VgaInit();

  OSTaskCreateExt(task_fonte,
                  NULL,
                  (void *)&task1_stk[TASK_STACKSIZE-1],
                  TASK1_PRIORITY,
                  TASK1_PRIORITY,
                  task1_stk,
                  TASK_STACKSIZE,
                  NULL,
                  0);

  OSStart();
  return 0;
}
